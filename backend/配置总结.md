# Djangoç¯å¢ƒé…ç½®å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. Condaè™šæ‹Ÿç¯å¢ƒ
- **ç¯å¢ƒåç§°**: `mentor-backend`
- **Pythonç‰ˆæœ¬**: 3.11
- **æ¿€æ´»å‘½ä»¤**: `conda activate mentor-backend`

### 2. å·²å®‰è£…çš„ä¾èµ–åŒ…
- Django 5.0
- Django REST Framework 3.16.1
- django-cors-headers 4.9.0
- python-dotenv 1.2.1
- pillow 12.0.0
- mysqlclient 2.2.7 (MariaDBé©±åŠ¨)

### 3. Djangoé¡¹ç›®ç»“æ„
```
backend/
â”œâ”€â”€ manage.py                     # Djangoç®¡ç†å‘½ä»¤
â”œâ”€â”€ requirements.txt              # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ .env.example                  # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore                    # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ start.ps1                     # å¿«é€Ÿå¯åŠ¨è„šæœ¬(Windows)
â”œâ”€â”€ db.sqlite3                    # SQLiteæ•°æ®åº“(å¼€å‘ç¯å¢ƒ)
â”‚
â”œâ”€â”€ mentor_platform/              # é¡¹ç›®é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ settings.py              # âœ… å·²é…ç½®CORSã€RESTã€æ—¶åŒºã€æ•°æ®åº“
â”‚   â”œâ”€â”€ urls.py
â”‚   â”œâ”€â”€ wsgi.py
â”‚   â””â”€â”€ asgi.py
â”‚
â”œâ”€â”€ users/                        # ç”¨æˆ·ç®¡ç†åº”ç”¨
â”œâ”€â”€ courses/                      # è¯¾ç¨‹ç®¡ç†åº”ç”¨
â”œâ”€â”€ progress/                     # å­¦ä¹ è¿›åº¦åº”ç”¨
â””â”€â”€ authentication/               # è®¤è¯æˆæƒåº”ç”¨
```

### 4. å·²é…ç½®çš„Settings.pyåŠŸèƒ½
âœ… REST Frameworké…ç½®
âœ… CORSè·¨åŸŸæ”¯æŒ (å…è®¸Flutterå‰ç«¯è®¿é—®)
âœ… MariaDBæ•°æ®åº“é…ç½®æ¨¡æ¿ (å·²æ³¨é‡Šï¼Œéœ€è¦æ—¶å¯ç”¨)
âœ… SQLiteå¼€å‘æ•°æ®åº“ (é»˜è®¤å¯ç”¨)
âœ… ä¸­æ–‡è¯­è¨€å’Œä¸Šæµ·æ—¶åŒº
âœ… é™æ€æ–‡ä»¶å’Œåª’ä½“æ–‡ä»¶è·¯å¾„
âœ… å››ä¸ªæ ¸å¿ƒåº”ç”¨å·²æ³¨å†Œ

### 5. æ•°æ®åº“çŠ¶æ€
âœ… å·²æ‰§è¡Œåˆå§‹è¿ç§»
âœ… åˆ›å»ºäº†Djangoé»˜è®¤æ•°æ®è¡¨ (ç”¨æˆ·ã€æƒé™ã€ä¼šè¯ç­‰)

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
```powershell
cd backend
.\start.ps1
```

### æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨
```powershell
cd backend
d:\miniconda3\Scripts\conda.exe run -n mentor-backend python manage.py runserver
```

### æ–¹æ³•3: æ¿€æ´»ç¯å¢ƒåå¯åŠ¨
```powershell
conda activate mentor-backend
cd backend
python manage.py runserver
```

å¯åŠ¨åè®¿é—®: http://127.0.0.1:8000

## ğŸ“‹ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

### 1. åˆ›å»ºè¶…çº§ç®¡ç†å‘˜
```bash
python manage.py createsuperuser
```
ç„¶åè®¿é—® http://127.0.0.1:8000/admin

### 2. å®šä¹‰æ•°æ®æ¨¡å‹
åœ¨å„åº”ç”¨çš„ `models.py` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹ï¼š
- `users/models.py` - ç”¨æˆ·èµ„æ–™ã€è§’è‰²ç­‰
- `courses/models.py` - è¯¾ç¨‹ã€ç« èŠ‚ã€èµ„æºç­‰
- `progress/models.py` - å­¦ä¹ è®°å½•ã€è¿›åº¦ç­‰
- `authentication/models.py` - è®¤è¯ç›¸å…³æ¨¡å‹

### 3. åˆ›å»ºåºåˆ—åŒ–å™¨
åœ¨å„åº”ç”¨ä¸­åˆ›å»º `serializers.py`ï¼Œä½¿ç”¨DRFåºåˆ—åŒ–æ•°æ®

### 4. å®ç°APIè§†å›¾
åœ¨å„åº”ç”¨çš„ `views.py` ä¸­å®ç°REST APIç«¯ç‚¹

### 5. é…ç½®URLè·¯ç”±
åœ¨ `mentor_platform/urls.py` å’Œå„åº”ç”¨ä¸­é…ç½®URL

### 6. é…ç½®MariaDB (ç”Ÿäº§ç¯å¢ƒ)
1. å®‰è£…å¹¶å¯åŠ¨MariaDB
2. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
3. ä¿®æ”¹ `settings.py` å¯ç”¨MariaDBé…ç½®
4. é…ç½® `.env` æ–‡ä»¶

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### åˆ›å»ºæ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations
```

### æ‰§è¡Œè¿ç§»
```bash
python manage.py migrate
```

### åˆ›å»ºè¶…çº§ç”¨æˆ·
```bash
python manage.py createsuperuser
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨
```bash
python manage.py runserver
```

### è¿è¡Œæµ‹è¯•
```bash
python manage.py test
```

### Django Shell
```bash
python manage.py shell
```

### æ£€æŸ¥é¡¹ç›®é…ç½®
```bash
python manage.py check
```

## ğŸ“ é‡è¦æç¤º

1. **å¼€å‘ç¯å¢ƒ**: å½“å‰ä½¿ç”¨SQLiteï¼Œé€‚åˆå¼€å‘å’Œæµ‹è¯•
2. **ç”Ÿäº§ç¯å¢ƒ**: éœ€è¦åˆ‡æ¢åˆ°MariaDBï¼Œå¹¶ä¿®æ”¹å®‰å…¨é…ç½®
3. **SECRET_KEY**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»æ›´æ”¹ä¸ºæ–°çš„å¯†é’¥
4. **DEBUG**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®ä¸º `False`
5. **CORS**: ç”Ÿäº§ç¯å¢ƒéœ€è¦é™åˆ¶å…è®¸çš„æ¥æº
6. **ä¾èµ–å®‰è£…**: ä½¿ç”¨æ¸…åæºåŠ é€Ÿ `-i https://pypi.tuna.tsinghua.edu.cn/simple`

## ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å• (éƒ¨ç½²å‰)

- [ ] æ›´æ”¹ SECRET_KEY
- [ ] è®¾ç½® DEBUG = False
- [ ] é…ç½® ALLOWED_HOSTS
- [ ] é™åˆ¶ CORS_ALLOWED_ORIGINS
- [ ] é…ç½®ç”Ÿäº§æ•°æ®åº“ (MariaDB)
- [ ] è®¾ç½® HTTPS
- [ ] é…ç½®é™æ€æ–‡ä»¶æœåŠ¡
- [ ] å¯ç”¨æ—¥å¿—è®°å½•
- [ ] é…ç½®ç¯å¢ƒå˜é‡ (.env)

## ğŸ“ é¡¹ç›®ä¿¡æ¯

- **å‰ç«¯**: Flutter (webæ–‡ä»¶å¤¹)
- **åç«¯**: Django 5.0 (backendæ–‡ä»¶å¤¹)
- **æ•°æ®åº“**: MariaDB/MySQL (ç”Ÿäº§), SQLite (å¼€å‘)
- **API**: REST API
- **è®¤è¯**: Session + å¯æ‰©å±•JWT

---

**ç¯å¢ƒé…ç½®å®Œæˆæ—¶é—´**: 2025-12-04
**é…ç½®çŠ¶æ€**: âœ… å¯ä»¥å¼€å§‹å¼€å‘
